# odoo应用手册

## 第一部分 Odoo起步
### 第1章安装和初始设置
1. 数据库服务和 Odoo服务可被安装到同一台服务器上，如果出于性能的考虑，也可分布到不同的计算机上。
测试odoo服务1+PG数据库
odoo服务2------|
用一个用户名试验读写。

2. 安装ubuntu时可以将国外或香港的网址如“ http://hk.archive.ubuntu.com”替换为“http://mirrors.163.com”，然后在终端中执行下列命
3. 查看8069端口由哪个程序使用PID：sudo lsof –i:8069
4. 查看本机端口使用情况：sudo netstat –anpt
5. 每一个独立核算的企业都有一套相互关联的账簿体系，把这一套完整的账簿体系建立在计算机系统中就称为一个数据库。一般一个企业只用一个数据库。如果企业有几个下属的独立核算的实体，也可以为每个实体单独创建数据库。
6. 如果你安装了“website”模块后，登录界面的“数据库管理”菜单将不再显示，需要手动输入“http://IP 地址或域名:Odoo 服务端口/web/database/manager”如“http://127.0.0.1:8069/web/database/manager”来进入数据库管理界面。
7. 你可以安装“users_ldap”模块，它通过 LDAP（轻型目录访问协议，一个系统标准）来管理用户的认证，利用它可连接多个 Odoo 数据库，多个数据库可以共享一个用户账号。
8. 设置公司信息，现在币别默认为 EUR，现在不用管它，等后面安装好中国会计科目表后，币别会自动改为CNY。
9. 建议新建数据库后首先安装“会计”模块，点击“会计”图标下面的“安装”按钮。此时会多出一个“安装特性”选项卡，显示安装中创建的菜单和定义的报表。会计模块可以设置全局默认进项税16%和销项税11%。
10. 模块安装完成后，为了安装会计科目表，我们需要通过菜单“会计→配置→设置”，在科目一览表一节，点击“安装其它会计科目表”。注意在安装会计科目表前，请不要新建或编辑科目表，否则会造成安装的科目表不能显示。
11. 尽管卸载模块功能工作良好，但并不完美。它并不能保证精确的返回到未安装此模块之前的状态。因此在安装新模块之前，建议你备份数据库，这样你可以测试新模块并决定它们是否适合。如果它们不适合，你可以返回到你的备份。
12. 安装了一个新模块（默认情况下这些模块中的新的英文名词没有被翻译），或者更新了汉化包后，你需要通过“关于Odoo”菜单来激活开发者模式，然后使用“设置→翻译→加载翻译”，选择语言“Chinese(CN)/简体中文”，并勾选“覆盖已存在的术语”，最后点击“加载”按钮，来重新装入中文的翻译文件，为使界面完全汉化，你需要重新启动 Odoo 服务（如果不方便重启 Odoo服务，你可以尝试在首选项中先切换为英文，点击“应用”按钮后，再切换回中文）。
13. 因系统默认的报表字体不包含中文，因此打印中文报表时中文会是乱码。为此，在公司信息设置窗体中(参照1.4.1.2节)的“报表设置”选项卡中，“配置（RML）”一节的字体字段，点击右侧的“（重新加载字体）”。如果在字体列表里没有需要的中文字体，就需要首先安装中文字体：sudo apt‐get install ttf‐wqy‐zenhei
页眉和页脚也可以编辑，应该去除公司图标。
14. Odoo使用werkzeug 作为 web 服务的框架，性能比之前的cherrypy 有了很大的改善。但无论是werkzeug 还是cherrypy，都不是专门的web 服务器。通常的做法是在Odoo 之前加一个Nginx、Apache 或其它服务器。
15. Ngnix.conf里面gzip添加一个类型 application/javascript
16. 修改Nginx的default文件vi /etc/nginx/sites‐available/default，内容对比手册
17. 重启 Odoo 服务后，需要重启下Nginx，此代理才能正常工作。
18. 常见错误
CPU limit out，不要急着升级 CPU，修改odoo.conf 里的 limit_time_cpu 即可。
Nginx504 错误，修改Nginx 配置里的timeout 时间。
Nginx 502 错误，跟Nginx 无关，修改odoo.conf 里的limit_time_real 即可
19. 启用多核来提升Odoo 性能需要安装一堆模块，待验证。
20. 首先使用 df 命令看硬盘，假设你的磁盘是 sda，则执行sudo blockdev setra 4096 /dev/sda
这里4096 是内存从磁盘上读取文件的缓冲区大小
21. postgresql 数据库优化。shared_buffers：这是最重要的参数

### 第2章Odoo的基本操作
1. 点击菜单“设置→技术→动作→设置向导”，可显示设置向导的动作、类型和状态
2. “联系人”的多种联系方式。请通过菜单“销售→设置→设置”，在“报价和销售订单”一节的客户地址字段勾选“在销售订单上显示三个字段：客户、开票地址、发货地址”。然后在联系人窗体里新建或编辑联系人时，你就可以选择地址类型。
3. 通过菜单“销售→设置→设置”，在“产品”一节和“销售价格”一节分别勾选“某些产品可以使用不同的计量单位进行销售或采购（高级）”和“同一产品对不同客户有不同价格”，如下图所示：
4. 系统默认的每页显示条目数为 80。点击你可以点击此部位，然后直接输入要显示的起始条目和终止条目。
5. 对于你先前做过的类似文档，如产品、订单、发票、发货单等，你可以复制一个在此基础上修改，而不必每次都从头录入。
7. domain 用于自定义的搜索条件，主要用于自定义权限管理中的记录规则，其中的单个条件是一个三个元素组成的元组。

### 第3章应用到你的公司
1. 为了简化程序，并没有安装仪表板
2. 激活“开发者”模式后，在“群组”中，既可以设置访问权限，又可以管理菜单。所有用户都有权限查看的菜单在这里不显示
3. 发票的编码方法可以通过菜单中“设置→技术→序列与标识符→序列”来修改，默认情况下使用“INV/年/序号”

4. 测试每种用户原生能进行的操作
如果库存是管理员：则强制质量是用户，会计及财务是开单
如果库存是用户：则强制质量是用户

财务中，顾问的权限涵盖会计师，会计师的权限涵盖开单

#### 客户/供应商信息管理部分 res.partner
原始权限
在销售和采购中，只有管理员有权限增加客户和供应商信息，普通用户没有
仓库管理员也有权限增加信息
财务中即使顾问也没有权限增加客户/供应商信息。

应对策略
取消库存管理员对res.partner的创建和写权限
stock.access_product_group_res_partner_stock_manager,res_partner group_stock_manager,base.model_res_partner,stock.group_stock_manager,1,0,0,0

取消销售管理员对res.partner的创建和写权限
sale.access_res_partner_sale_manager,res.partner.sale.manager,base.model_res_partner,sales_team.group_sale_manager,1,0,0,0
sale.access_product_group_res_partner_sale_manager,res_partner group_sale_manager,base.model_res_partner,sales_team.group_sale_manager,1,0,0,0

取消采购管理员对res.partner的创建和写权限
purchase.access_res_partner_purchase_manager,res.partner.purchase.manager,base.model_res_partner,purchase.group_purchase_manager,1,0,0,0
purchase.access_product_group_res_partner_purchase_manager,res_partner group_purchase_manager,base.model_res_partner,purchase.group_purchase_manager,1,0,0,0

这样把上面5个可以创建和写的权限取消后，就剩下一个群组：额外的权利/联系人创建，对res.partner有创建和写的权利。
需要让哪个用户有这个权利就把这个用户添加到该群组中。

上面只是解决了谁有权限增删的问题，下面修改各看各的信息
```xml
        <record id="base.action_partner_supplier_form" model="ir.actions.act_window">
            <field name="domain">[('supplier','=',True)]</field>
        </record>

        <!-- 这里面要注意这个action不是和supplier对应的action_partner_customer_form，而是action_partner_form"-->
        <!-- action_partner_customer_form有什么用处还不知道-->
        <record id="base.action_partner_form" model="ir.actions.act_window">
            <field name="domain">[('customer','=',True)]</field>
        </record>
```

#### 产品信息管理部分 product_product，product_template
#####财务角色
在测试过程中，作为财务顾问，虽然有权限去写上面这两个模型，但是在界面中点击已经存在的产品时会弹出这个提示框：

对不起，您没有访问此文档的权限。 只有以下访问等级的用户可才做这:
- Inventory/User
- Inventory/Manager
- Sales/User: Own Documents Only
- Other Extra Rights/Portal
- Purchases/User

(单据模型: stock.warehouse.orderpoint)


解决方法一是把Other Extra Rights/Portal组中增加财务顾问（还需要具体关注这个Other Extra Rights/Portal的具体权限不能过大，因为工艺想用这个组来创建，编辑和修改产品模型），不推荐使用
解决方法二从stock.warehouse.orderpoint入手，如果把这个模型加入到财务开单的可访问的模型中，也可以解决问题，个人认为财务有必要访问具体的产品信息，所以添加如下访问规则
access_stock_warehouse_orderpoint,stock.warehouse.orderpoint,stock.model_stock_warehouse_orderpoint,account.group_account_invoice,1,0,0,0

取消财务顾问对产品的创建和删除权限，保留读和写权限，而默认会计师和开单只有读权限，不能修改
account.access_product_product_account_manager,product.product.account.manager,product.model_product_product,account.group_account_manager,1,1,0,0
account.access_product_template_account_manager,product.template.account.manager,product.model_product_template,account.group_account_manager,1,1,0,0

#####库房角色
库房用户，只保留读权限
stock.access_product_product_stock_user,product_product_stock_user,product.model_product_product,stock.group_stock_user,1,0,0,0
stock.access_product_template_stock_user,product.template stock user,product.model_product_template,stock.group_stock_user,1,0,0,0

库房管理员，只保留读权限
stock.access_product_product_stock_manager,product.product stock_manager,product.model_product_product,stock.group_stock_manager,1,0,0,0
stock.access_product_template_stock_manager,product.template stock_manager,product.model_product_template,stock.group_stock_manager,1,0,0,0

#####销售角色
销售管理员，只保留读权限
sale.access_product_product_sale_manager,product.product salemanager,product.model_product_product,sales_team.group_sale_manager,1,0,0,0
sale.access_product_template_sale_manager,product.template salemanager,product.model_product_template,sales_team.group_sale_manager,1,0,0,0


#####采购角色
采购管理员，只保留读权限
purchase.access_product_product_purchase_manager,product.product purchase_manager,product.model_product_product,purchase.group_purchase_manager,1,0,0,0
purchase.access_product_template_purchase_manager,product.template purchase_manager,product.model_product_template,purchase.group_purchase_manager,1,0,0,0

按照上面的方法只保留两个模型的读权限，那么在product_supplierinfo模型，也就是“产品”-》“库存”页面里面的供应商信息将不能添加，只有放开product_template里面的写权限，才能针对产品添加供应商信息。也许会把这个权限放给采购。


产品的几维属性
1，来源，供货方式：购买或者自制
2，存在形式：服务或者可以库存
3，用途：可用于销售，可用于采购（简单起见，所有零件都勾选这两个选项）
4，会计属性：成本及销售价格，收入科目，费用科目，销项税，进项税


产品分类定义收入和费用科目作为大的全局设定，具体产品如果指定科目就可以代替默认产品分类中指定的科目（需要测试）
销项税和进项税在会计科目表安装的时候也会指定默认值。供应商中定义了税率，则使用供应商税率，如果在产品中也指定了税率，则使用产品的税率。





产品信息权限(先不用，待仔细考虑)
invku_sale_order_read,sale order read,sale.model_sale_order,base.group_jingying,1,0,0,0
invku_sale_order_line_read,sale order line read,sale.model_sale_order_line,base.group_jingying,1,0,0,0
invku_purchase_order_read,purchase order read,purchase.model_purchase_order,base.group_jingying,1,0,0,0
invku_purchase_order_line_read,purchase order line read,purchase.model_purchase_order_line,base.group_jingying,1,0,0,0
invku_product_all,product all,product.model_product_product,base.group_chanpin,1,1,1,1
invku_product_temp_all,product temp all,product.model_product_template,base.group_chanpin,1,1,1,1





## 第二部分 从财务管理开始



### 第4章收据和付款
### 第5章从发票到支付

#### 修改前缀
“设置→技术→序列与标识符→序号” 里面
INV改成发票，
BILL账单？
PO改成采购单
SO改成销售单

#### 财政状况
可以通过菜单“会计→配置→会计→财政状况”来设置科目和税的替换规则
这个替换规则是在客户/供应商信息中指定的，可以把全局默认规则替换
同时在建立销售报价单/采购单的“其它信息”时可以选择已经建立好的替换规则

#### 可以手动建立发票


#### 可以取消发票
默认情况下，Odoo 不允许你对已记账的发票进行取消。因为已创建了会计分录，理论上你不可以回退并删除它们。

在安装“account_cancel”模块后，通过菜单“会计→配置→会计→日记账”，选择相应的日记账种类，里面的高级设置，勾选相应的选项卡“允许取消分录”

如果符合以下两个条件，将允许取消发票：
1）会计分录尚未对帐或付款：如果已对账，那么你将不得不首先取消对帐。
2）会计期间或会计年度尚未被关闭（未月结）：如果它是关闭的，那么将没有任何修改的可能。
取消发票将自动修改相应的会计分录。
在发票窗体中点击“取消发票”按钮即可取消发票。

#### 合计和发票不一致原因
当你核准发票时，你需要检查不含税的发票行的小计和税两者之和与合计数是否和纸质发票一致。
合计数和你的供应商给你的纸质发票不一致的原因包括：
>>供应商计算错误
>>合计金额使用了不同的四舍五入方法

1. 这种情况下，你可以基于总计修改记录行上的值，或者修改表单左下侧的税金总额。它们都是可编辑的，因此你可以修改他们来调整总数。
>> 在草稿状态的账单和发票是可以编辑的，在采购一方编辑调整，在会计一方就会实时显示出来


2. 为了保证发票的合计数一致，有时你需要提高价格的小数点位数。使用菜单“设置→技术→数据库结构→小数准确性”，在列表里找到“ Product Price”，然后更改“位数”字段的值。

> 调整后就可以和供应商的纸质发票一致，然后再点击“验证”，这个时候，账单/发票变成打开状态，说明已经挂账完成。对于挂账完成的账单/发票不能编辑。
当合计一致，你就可以核准这张发票。Odoo会生成相应的会计分录，你可以使用发票上的科目字段和发票上每个记录行的科目字段来管理这些会计凭证。

#### 退款
你可以通过一张已存在的发票快速的生成一张退款单。选择一张“待支付”或“已付”状态的客户发票，然后点击发票窗体上部的“要求退款”按钮。

当创建了“草稿”状态的退款发票并不会影响日记账分录，一旦验证变成“打开”状态，就会产生日记账。观察日记账发现会和之前创建的原始发票的“借贷”关系相反，说明成功。


#### 付款
发票“记账”后，点击发票窗体上部的“登记付款”按钮，确认付款金额并选择付款方式，


#### 无用单据
无用的单据，如发票草稿，在Odoo中是不能删除的，你可以选择“取消”，对“取消”的单据后还可以“重置为草稿”，然后修改后重用。

#### 取消与撤销分录
日记账分成几类，银行，现金，客户，供应商等等。如果想取消日记账，需要把对应类别设置成可以取消，然后可以进行取消操作。
撤销操作，感觉是进行对冲操作使用的。对之前的日记账进行逆转，会新生成相反的条目。



#### 管理银行对帐单



#### 预付款管理
为了使用付款管理你需要安装采购付款管理“payment”模块，它是Odoo系统的可选模块，经查找状态为已安装。

在财务模块里面，如果预先收取了客户的预付款，或者把预付款提前给了供应商，可以先进行登记。在之后的交易中，在需要付款的时候，可以扣减这部分预付款。

#### 发票中的产品单价的小数精度问题
如果产品单价为4位小数精度，而发票里面每行单价只有2位小数单价。
手册中说addons/account/models/account_invoice.py里面的
price_unit = fields.Monetary(string='Unit Price', required=True)
修改一下，实际在10.0版本已经修改完成
price_unit = fields.Float(string='Unit Price', required=True, digits=dp.get_precision('Product Price'))


### 第6章财务分析
在打印报表页面：翻译有些问题，“有运动”应该翻译成“有发生额的”

#### 财务-报告-PDF报告-业务伙伴分类账：出PDF的时候报错
odoo10/addons/account/report/account_partner_ledger.py 38行左右的问题
已经在github 登记#24881，刚刚登记完，继续跟踪
解决方式是在 翻译里面，把简体中文的日期格式里面的汉字删除： %Y年%m月%d日


#### 业务伙伴信息
选择相应的客户/供应商后，进入form视图，右边有一个“动作”菜单，里面包含对该客户/供应商的相关操作。

在 Odoo 中，你可以基于应收帐款金额来搜索联系人。因此，搜索应收账款金额在 1 到 99999999 之间的业务伙伴时，会得到有欠款的业务伙伴列表。

#### 总帐和试算平衡
试算平衡可以快速的检查每个科目的余额

#### 税
可以通过会计->配置->会计->税，来设置税种
可以设置百分比，税科目和退款的税科目。


### 第7章设置公司的财务结构

#### 日记账（分录）
所有的会计凭证必须在会计分录中体现，因此你必须，至少为你的客户凭证创建一个销售分录，为你的供应商凭证创建一个采购分录，为你的现金和银行交易创建一个现金分录。

系统内置了如下分录
Customer Invoices：客户发票
Vendor Bills：供应商账单
Miscellaneous Operations：杂项操作
Exchange Difference：汇率差异
Bank：银行
Cash：现金
Stock Journal：库存分类账
每种类型有
每种分录是有
1. 类型，分录类型控制必须显示的字段和必须在分录中录入的财务数据。它定义了字段的规则和每个字段的属性。例如：在录入银行分录时账号必须显示，但是其它分录不需要该字段。

系统默认有 销售，采购，现金，银行，杂项，五种类型
2. 分录序列：这个规则决定了会计凭证的自动编号方法，也可以多个分录使用一个序号

3. 默认的借方科目和贷方科目（没有试验出来）
当你在分录中快速录入数据时，贷方和借方科目默认允许自动的生成相匹配的数据。例如，在银行分录中，你需要设置相对应的贷方和借方科目的银行帐号，这样你就不再需要为每一笔交易手动的输入相关的数据。

>>通过菜单“会计→顾问→科目表”，搜索一个具体科目，点击打开科目窗体，从”动作”菜单中选择“日记账项目”，可以看在这个科目下面具体的每一笔凭证。

#### 数据录入时的控制和提示
在odoo中有两种方式控制分录，财务账户和组用户访问控制

在分录的高级选项->访问控制中可以选择“允许的科目类型”和“允许的科目”。如果留空，表示没有任何约束。这个功能对于限制可能发生的数据录入错误非常有用

举例：避免从银行账户A直接转到银行账户B，通过中间科目C处理交易

#### 会计期间及财年度
会计->配置->设置里面可以设置“财务年度的最后一天”
“锁定分录”里面有两个日期
非顾问的锁定日期：只有顾问才能更改此日期及之前的帐薄
锁定日期：任何人都不能更改此日期及之前的帐薄

在关闭财务年度之前有一系列的操作要处理，详见手册。


## 第三部分 管理公司的价值链
### 第8章销售管理
#### 销售订单填写
价单和销售订单通过菜单已经有所区分,你可以把销售订单理解为已经确认了的报价单（销售合同）。在确认报价单转为销售订单前，你录入的信息可被更改。 

主信息
价格表：确定报价单上使用的币种及每个产品单价。（为出现此字段，你需要通过“销售→配置→设置”，在“定价”一节的“标价”字段勾选“不同客户不同的价格”。） 
但是经过试验发现，价格表里只有币种信息，后来在产品的销售选项卡里面多了“定价”，就是价格表，指定的币种在这里作为名称出现，后续还需要继续试验。

辅助核算项：如果你通过任务来管理，就可以通过被选择的辅助核算项与此标价单关联。通过订单完成的销售额，将被指定给相关项目，这样就可以计算出项目的盈利情况。

其它信息选项卡中
客户参照：是客户自己的订单号。
贸易术语:用来说明这个销售贸易类型的一些提示信息. 
发货策略:决定这次销售，1）分批发货；2）整批发货. 
支付条款：表示顾客需要遵循的付款方法，例如： 30 天。 
财政状况: 用于税替换和科目替换
    通常，在产品窗体的“会计”选项卡中设定销售、采购该产品应缴纳的税，之后，在销售订单、采购单中，系统会自动采用产品上设定的税。但是，有时候，同一产品，针对不同类型客户，其计税方式不同。例如，某产品内销时要计消费税，但外销时不计消费税。那么，对于外销客户，应该采用不同于产品上设定的计税方法计税。
    当指定客户的替换规则后，系统会根据替换规则中的设定将产品中设定的税换成别的税计算税额。
    又如，在产品信息中设定销售、采购该产品记的收入、费用科目，之后，在销售订单、采购订单中，系统会自动采用产品上设定的科目生成发票。但是，有时候，同一产品，针对不同类型客户，其收入科目不同。例如，某产品内销时要记入主营业务收入-国内科目，但外销时要记入主营业务收入-国外科目。那么，对于外销客户，应该采用不同于产品上设定的科目。

    当指定客户的“财政状况”后，系统会根据替换规则中的设定将产品中设定的科目换成别的科目生成发票。

在报价单窗体的下部，你还可以为该报价单增加关注者，设置正在关注的事项或“新增内部备注”。

订单行选项卡
产品：选择将出售给客户的产品，点击文本框右侧的黑三角将显示在产品列表，你可以从中选择。

说明：系统会自动根据产品信息自动填写。
当选择了要销售给客户的产品后，Odoo 自动完成其它需要填写的字段，包括说明、数量、计量单位、税、单价、成本价、折扣等，所有这些信息都来源于产品窗体。当然，你可以修改它们。

计量单位：此字段默认不显示，你可以通过菜单“销售→配置→设置”，在“产品”一节的“计量单位”字段勾选“一些产品可使用不同的销售 / 采购单位 (高级）”。

成本价：指产品的成本价格，如果销售员销售的价格低于该价格，公司将承受损失。

折扣：可以通过“销售→配置→设置”，并在“报价单和销售”一节的“折扣”字段，勾选“允许在销售订单行上进行折扣”，就可达到以下效果：让折扣以标价的百分比的形式显示在销售订单上，或者，仅仅按照默认方式显示打完折扣后的价格。客户将在成本价旁边看到一个Ｘ%的折扣，该价格与标准价格不同。

在“合计”旁边点击“（更新）”，系统将自动计算小计和合计。

在销售订单中，选择的产品按照用户使用的语言显示，同时还可以按照客户的语言显示，打印报价单或销售订单时，它们将被翻译成客户使用的语言。在“产品”窗体中，进入编辑模式，点击“产品名称”右上角的图标，然后在翻译窗体中输入相关字段的翻译。

当录入所有产品后，你可以打印报价单，并把它发给客户。为此，从窗体中上部“打印”按钮下拉菜单中选择“报价单/订单”或直接点击“打印”按钮。Odoo 将用 PDF 格式显示该报价单，在打印之前你可以先看一下。

当客户确认了报价单后，你可以通过报价单窗体的“确认订单”按钮将此报价单转化为销售订单。

#### 客户要求日期，承诺日期和生效日期
在安装了模块sale_order_dates,以后，销售订单窗体的“其他信息”会出现三个字段

客户要求日期：客户要求的发运日期。当这个订单被确认后，发货的期望的日期将被基于这个日期和公司安全延迟计算。如果你希望这个发货越快越好，你就将此字段留空。这样期望的日期将使用默认的方法计算：基于产品提前期和公司的安全延迟。
承诺日期：产品必须确信被发运的日期，这是你答应客户的日期。
实际日期：创建第一个发货单的日期。

#### 包装
要使用包装功能，首先要通过菜单“仓库→配置→设置”，在“产品”一节的“包装方式”字段中勾选“管理每个产品的可用的包装选项”。
设置完成后，在产品窗体的“库存”选项卡的“包装”一节，通过“添加一个项目”来定义此产品可用的包装类型及其包装数量。比如快递袋装1个，纸箱装3个。
列表中的第一个项目作为默认包装类型使用。
通过菜单“仓库→配置→包裹类型”，你可以编辑或删除已有的包装。

一旦在销售订单的订单明细中中指定了包装类型，如果订购数量与包装类型的包装数量不匹配，Odoo 就弹出一个警告，订购数量必须是包装类型中定义的包装数量的整数倍。

不要混淆包装管理和多计量单位管理。计量单位指保存库存控制的最小可用单位；而包装指在流通过程中，为保护产品、方便储运、促进销售，依据不同情况而采用的容器、材料、辅助物及所进行的操作的总称。
即使效果一样，打印的文件也有区别。下面这两个操作在库存移动中有相同的效果，但是在打印销售订单和装箱单时会不同，如：
6 套 Odoo 应用手册，使用两个纸箱发货。
两箱 Odoo 应用手册，没有包装信息。
如果客户要订购 1 箱另加 1 套 Odoo 应用手册，销售员可以在销售订单上输入两个订单行,使用相同的产品而计量单位不同。

有时候更喜欢使用物料清单来管理，把包装放到物料清单里面，而不是通过建立包裹的方法。

#### 警告
10.0中没有发现“warning”警告模块，在业务伙伴页面也没有发现“警告”选项卡，在产品页面的备注里有一些说明，也不是警告。经测试这些说明会分别出现在采购和销售单的说明中。

#### 发货方式、开票控制和月底对账
发货方式：如果销售订单选择了“分批发货”，一旦销售的产品有库存，发货单就会显示“部分可用”。库管员可以按照实际可用的库存来部分发货，以后当仓库中有可用的库存时，库管员可再次发货。
如果运送方式是“整批发货”，发货单的状态将显示“等待可用”，直到仓库中的可用库存满足销售订单的产品数量时，才显示“可用”。

在产品窗体的“一般信息”选项卡中你可以设置产品的开票策略:控制采购账单，分两种：收到数量和订购数量

月底对账：对于长期客户，在月底一般都要由销售部门和客户进行对账。
通过菜单“销售→销售→销售订单”，你可以根据客户、日期、发票装态等，对显示的销售订单进行筛选。然后选择要导出的销售订单，
最后从动作下拉菜单中选择“导出”。

#### 多个订单合并开票
通过菜单“销售→销售→销售订单”，选择要开票的多个订单，从“动作”菜单中选择“基于订单开票”
前提是产品已经交货，就是从库房发出，否则会提示没有订单项。

#### 运输成本管理
为了在 Odoo 中管理发货成本，需要安装“delivery（运输成本）”模块。
这个模块能够使你管理：
>>与你合作的物流公司，
>>不同的运输方法，
>>每次发货的成本计算及开票，
>>运输方法和关税。
Odoo 会自动根据创建好的运输方式新建一个可采购的产品与之对应，具体使用方法，详见手册。

#### 按照发货单开票
要根据运送产品的实际数量开销售发票，需要将销售订单窗体的“其它信息”选项卡的“生成发票”字段中设置为“基于发货单”。不要在销售订单中增加运费，你需要在基于已交付的产品数量生成发票后，再把运费加到发票中。
然后，你可以确认订单，并确认发货。
当按照已设置的发送方式生成发票，Odoo 自动在每张销售发票上增加相关的运费，运费的计算基于实际产生的运费。


#### 跟踪利润率
对每家企业而言，控制好利润率非常重要。即使你有着良好的销售额，如果利润率不够高，也将无法保证公司的盈利能力。Odoo 提供很多方式监控利润率。主要的有：
>>销售订单的利润率，首先要安装“sale_margin”模块，在报价单或销售订单的产品明细下方会显示“毛利”的金额。
毛利的计算公式：销售数量×(客户的销售价格-产品成本价格)。
>>产品利润率，要跟踪产品利润率，首先要安装“product_margin”模块，使用菜单“会计→报告→管理→产品毛利”可对产品利润率进行分析。Odoo提示输入时间区段和要分析的发票状态。Odoo会默认提供过去12个月内待处理和支付的利润率分析。

>>项目利润率
>>使用价格表

#### 价格策略
企业的价格策略往往比较复杂，不同渠道价格不同，不同购买数量折扣不同，促销活动的临时优惠，年底返点，次品减价处理等等。价格表就是用来处理不同价格策略的价格计算问题。
Odoo 的价格表机制大致如下：
1）在产品窗体上可以为产品设置成本价格、销售价格。
2）可以为不同的业务伙伴设置不同的价格表，价格表可以按价格策略要求自动计算合适的采购价格或销售价格。
3）一个价格表有多个价格表版本。可以设置价格表版本是否有效，可以设置价格表版本的适用时间段。同一时间，每个价格表只能有一个价格表版本有效。例如，为某客户指定了价格表，但希望不同季节采取不同的价格策略，这样就需要为该价格表设置四个价格版本（每季度一个）。
4）一个价格版本上可以设置多条价格计算规则。每个价格计算规则包括适用条件和价格计算方法。当需要计算价格时，系统自动匹配条件，选择适用的价格计算方法，计算最终价格。

具体操作可见手册。

#### 销售点（POS）管理零售业务及账目
使用POS模块可以管理零售业务及其账目交易，它是基于触摸屏的web界面，大大提高了工作效率。
要练习本节，你需要安装“point_of_sale”这个模块。

具体操作可见手册。

#### 关于先发货，后按使用数量和商定价格结算的处理
解决方案如下：创建建一个客户仓库，用于存放发货到客户的产品。
客户下单生成销售订单后，发货仓库选新建的客户仓库。先不确认订单，保持草稿状态。
新建内部调拨单，将产品移至客户仓库中。
在“仓库→操作→全部操作”，在“内部移动”一节中，选择“全部操作”，点击“新增”按钮，
添加项目时，注意源库位和目的库位的选择，如下图所示：


#### 销售订单无法如数发货的处理
销售订单无法如数交货的情况时有发生，如果按正常的销售流程，已经确认的订单和部分发货，会造销售订单无法关闭。
解决办法为：销售的报价单暂不转为销售订单，先由仓库确认发货数量，如果数量不符，由仓库提醒销售更改销售订单。按实际数量更改并确认销售订单后，最后再做发货处理。
点击“标记为待办事项”，然后点击“检查可用”，最后点击“移动”按钮。
1）确定客户已使用的数量和价格后，修改销售订单的草稿为实际使用数量和商定的价格，然后确认系销售订单，后续按正常销售、发货、开票、付款流程处理。
2）从客户仓库中，可以看到已发货到客户但客户尚未付款的产品。


#### 客户门户
具体操作可见手册。

### 第9章采购管理
#### 完整的采购流程涉及的所有要素
采购单是这样一个文件，它可以让你管理价格谈判、控制供应商发票、处理收货单，并且可实现这些文件的同步。
采购的基本流程为：
1）、向供应商询价
2）、确认采购单
3）、接收产品
4）、发票管理

#### 询价单和采购单
使用以下命令“采购→采购→询价单”，点击“新建”，Odoo 打开一个空白的询价单，用于向供应商询价。如果这个询价单是由系统自动创建的，则有一个“关联单据”字段来记录生成此单的源（上级）单据号。

订单日期、入库仓库（在“发货和开票选项卡”中）等产品信息 Odoo 可自动完成，当然你可以修改它们，这些都是你与供应商进行洽谈需要的信息。

询价单的主体部分完成后，就可以开始添加采购项目了。

此时询价单在“草稿”状态，你可以“通过邮件发送询价单”。当你收到某个供应商的报价后，用菜单“采购→采购→询价单”，找到这张单据并（根据供应商报价）进行修改。当你决定接受这个报价时，点击“确认订单”按钮，则询价单进入“采购单”状态

采购单和销售单能不能修改可以设置，需要仔细考虑。如果不能修改，当供应商发票和实际入库价格不一致可能没有更好的解决方法。

#### 按供应商对产品分组（product_by_supplier）
需要安装第三方模块product_by_supplier，目前不用，具体操作可见手册。



### 第10章多公司环境
目前不用，具体操作可见手册。


## 第四部分 管理仓库并实现生产
此部分集中讨论物料的库存管理和由于组装和生产导致的物料转化。
### 第11章仓库管理系统（WMS）
>>“仓库→配置→设置→位置和仓库→路线”，里面选择：使用规则的产品高级路线。才会出现路线菜单，用于添加路线

Odoo的仓库系统简单、灵活且功能完善。它基于会计复式记账。其理念是“没有丢失，只有转库位”。就是说，没有丢失、消耗或者损失产品，产品只会从一个库位转移到另一个库位。Odoo 的每一个业务（比如采购收货、销售发货、盘盈盘亏库存、原材料的消耗）都是由一个库位转到另一个库位。

#### 仓库产品的设置
产品分类对属于其分类的产品是有影响的，并且一个产品可能只属于一个分类。通过菜单“仓库→配置→产品→产品分类”，点击“创建”来得到一个定义产品分类的窗体。

输入名称并选择了上级类别后，你会注意到其它的字段，特别是在科目属性一节，被自动填入了收入科目和费用科目的值。还有库存进货科目，库存出货科目，库存计价科目，库存日记账等。
这些值都会影响到产品。一个产品的相关字段如果在窗体保存时为空，则会被赋予默认值（默认值为上级类别中的科目设置）。最后点击“保存”。
产品分类定义好后，你可以在产品窗体的“库存”选项卡中选择此产品的内部分类。


产品的几维属性
1，来源，供货方式：购买或者自制
对于一个产品，要么内部生产，要么从供应商处采购。
2，存在形式：服务或者可以库存
库存商品：该产品库存被系统管理，并可以根据定义的补货规则，依据库存量或订单数量自动进行补货。
消耗品：该产品的库存被系统管理，你可以接收、转移和制造它。但它的补货不被系统管理，系统总是假设此类产品在任何时间内仓库中都有足够的数量，所以它不被自动补货。
服务：它不出现在任何仓库操作中。例如：咨询服务。在 Odoo 中，服务是一种特殊的产品。在产品窗体中设置“跟踪服务”字段为“创建任务并跟踪计时”，并在项目字段中选择此服务所属的项目，那么，当此产品的销售订单确认后，Odoo 在将自动在相关项目中新建一个任务来提供此服务（要实现自动创建任务的功能，你还需要在项目管理设置“从销售订单创建任务”）。

3，用途：可用于销售，可用于采购（简单起见，所有零件都勾选这两个选项）
4，会计属性：成本及销售价格，收入科目，费用科目，销项税，进项税

5，补货方式:在库存中设置
按订单补货（MTO ）：当一个客户的订单被确认后，系统就按照这个订单自动生成采购单或生产单来采购或生产产品。按照订单补货常用于样品、非常昂贵或者备货时间短的产品。“按订单生产”并不会改变你的库存，因为它是按订单的确切数量来补货的。
按库存补货（MTS）：产品从现有的仓库提供给客户。当其库存太低时，依据补货规则，系统自动产生补货单为每个产品补充到一定数量。按库存补货通常用于需求量大或者可以预测市场需求的产品。当未勾选按订单补货时，系统默认为按库存方式补货。

>再订购规则:当你采用按库存补货时，你需要通过菜单“仓库→库存管理→再订购规则”来为此产品进行补货规则的设置，包括产品库存的最小数量和允许的最大数量

>如果产品的补货方式为按订单，则产品的现有库存将不被考虑。如果要考虑到现有的库存，同时又按订单采购，则可以采用一种变通的方法：即把补货方式设置为按库存补货，同时在再订购规则中将最小数量和最大数量都设为0。


#### 计量单位
Odoo 支持多计量单位。一种产品可同时使用多种单位来表示。例如，你采购打印纸的时候使用箱作单位，但生产领用时用包作为单位，而在统计用量时用张做单位。你需要确定表述产品所有的计量单位都属于一个计量分类。如果一个产品属于重量类型，你可以使用公斤、吨或者克，但你不能用小时来描述它，因为它们不是一个单位分类。

#### 收货提前期、质保期和交货周期
>收货提前期：从供应商采购产品从订单确认到仓库收货所需要的时间。这个提前期在产品窗体的供应商一栏设置。
>质保期: 设备免费质保的时间，质保期在产品窗体的“销售”选项卡中设置。其中保修期用于维修设备和售后服务，在制造这一章节你能看到此部分更多的信息。
>交货周期：从接收订单到交付货物给客户的时间，在产品窗体的“销售”选项卡中设置。

#### 产品属性
同一个产品的变体怎么在ODOO中使用。
因为属性的组合会衍生出大量的产品变种，所以产品规则应慎用，尤其要避免属性和属性值过多。

#### 同一种产品，不同公司叫法不同的处理
公司内部自己的叫法，就是产品窗体里的产品名称。
客户的叫法：报价单说明，在“备注”选项卡中设置。
供应商的叫法：供应商描述，在“备注”选项卡中设置。

不同供应商的不同叫法：供应商产品名称供应商产品编码，为产品添加或编辑供应商时设置。

#### 产品的作废和恢复
无效和有效切换

#### 产品的内部货号保证唯一性
模块product_sequence
https://apps.odoo.com/apps/modules/10.0/product_sequence/

对我们的产品来说可能直接限制产品名称唯一就可以了。

注意，如果要使用此模块，请在创建新产品前安装此模块，或将原有自己建的产品清空，至少要保证在安装此模块前现有产品的内部货号都是唯一的，然后再安装此模块，否则此模块将不起作用（SQL运行失败）。

#### 采购和销售如何处理运费及收取运费的发票
1，事先定义一个 "运费类"的产品类别. 将运费类的科目记到对应科目上,最后添加几种运费的产品。
2，采购和销售的时候，除了采购和销售产品，再把“运费产品”选择进来，就可以了

#### 控制查看销售价格和成本价格的权限
产品价格是公司的关键隐私数据，针对企业内部，也要严格控制能看到产品的销售价格或成本价格的用户。

隐藏价格“osbzr_show_price”模块新增了两个用户组，“允许查看产品销售价”和“允许查看产品成本价”，并在产品窗体上做了限制，只有属于相应组的用户才可以看到销售价或成本价。
下载地址：http://git.oschina.net/osbzr/openerp-china
使用方法：通过菜单“设置→用户→用户组”，分别向这两个组“技术设置/允许查看产品销售价”和“技术设置/允许查看产品成本价”里面填加需要相应权限的用户。

把osbzr-openerp-china-master.zip里面的“osbzr_show_price”模块理解好，改写放到invku里面来。


#### 查看库存估值
1. 库存->报告->库存计价，还可以使用筛选菜单对显示的结果按产品、库位等进行分组显示。
注意，这个价格和产品页面的“成本价”直接相关，修改成本价，库存估值也会相应变动。

2. 仓库->报告->某日库存，可以查看当天或特定日期的库存价值。
两个重要概念
>在手数量：当前在你仓存的产品实际数量。
>预测数量：等于当前物理库存-预计出库数量+预计入库数量。

预测数量非常有用，因为它显示了销售员可以出售的数量。如果预测数量比在手数量多，意味着有些产品将入库。如果预测数量比在手数量少，意味着有些产品已被其它销售订单或者生产单预定。

通过菜单“仓库→库存管理→产品”，切换到列表视图，可以看到所有产品的在手数量和预测数量。

为了获取更多未来库存的详情，你可以在产品窗体上部点击“预测”链接，来查看库存量预测。

#### 库存盘点
要进行库存盘点，使用菜单“仓库→库存管理→库存调整”，点击”创建”按钮，
输入盘点表单号，选择盘点库位和要盘点的对象。点“保存”按钮后，点击“开始盘点”按钮，系统会列出库存明细，你可以编辑、删除或通过单击“添加一行”来新增一个产品的盘点。
确认产品的计量单位和库位，输入实际数量。所有项目添加完成后，点击“保存”。确认无误后，点击“盘点生效”按钮。

你还可以先将盘点导出，修改产品数量后再导入，在列表视图中勾选要导出的盘点，从“动作”下拉菜单中选择导出，选择要导出的字段，最后点击“导出到文件”，
对导出的文件中的产品数量进行更改后，再通过菜单“仓库→库存盘点”点击窗体上部的“导入”按钮。数据验证正确后，点击“导入”按钮进行导入。


盘点会计科目的设置
通过“仓库→配置→仓库管理→位置”，叉掉“内部”筛选条件来显示所有库位，在“库存调整”窗体中，来设置盘盈和盘亏的科目。

库存估值科目（入库）代表盘亏，库存估值科目（出向）代表盘盈。

#### 按订单入库
在采购流程中，Odoo 将自动产生入库单。新建并确认采购订单后，点击菜单“仓库”，在“仪表板”里面有“收货”部分，点击其中的“X待接收”，可以显示待入库的收货单列表
点击要入库的入库单，进入窗体。
你可以点击“编辑”按钮，在“操作”选项卡的“完成”字段输入要入库的数量，“保存”后点击点击“确认”按钮。如果不编辑直接点击“确认”按钮，系统将默认处理所有产品。
如果你填写的产品数量少于订单数量，系统会出现提示：
“创建欠单”或者“没有欠单”

#### 发货
关于发货可以使用基于客户订单的自动发货流程，也可以人工实现。为了深入学习本节，你需要安装销售管理模块。
新建并确认销售订单后，如果进入产品列表视图，你会发现虚拟库存的值会减少，这是因为系统为你刚创建的订单保留了产品，你不能把它再卖给另外的客户。

点击主菜单“仓库”，在“发货”部分，你会看到待处理的的发货单数量。

你将可以找到有关你销售订单相关那一行，点击这行来看一下其详细内容：

你可以点击“编辑”按钮，在“操作”选项卡的“完成”字段输入要发货的数量。最后点击“确认”按钮完成发货。如果你填写的产品数量少于订单数量，系统会出现提示：“创建欠单”或者“没有欠单”

注：状态
Odoo 区分两种状态：需求确认和库存分配
当一个商品的需求被确认时，有可能仓库没有足够的库存。当仓库内的商品能满足这个需求时，系统将冻结这部分库存（预留），已便为实现这个需求保留产品。
当你点击“保留”按钮时，如果仓库有足够的库存，待“出库方确认”状态将变为“可用”。
注：负库存
库存管理非常灵活而且有效。例如，如果你在产品入库时忘记输入，导致系统中没有足够的数量（而实际库存中有足够的数量），系统将阻止你把它们发给客户。这时你可以使用“强制可用”来人工允许这个出库操作，但在这种情况下，就存在负库存的风险。你应该监控你的负库存情况并且及时做库存修正。


#### 仓库库位
在 Odoo 中仓库代表实物存放地点。一个仓库可以在多个层级上分割成多个库位。库位是仓库组成的最小单位，例如客户库位、生产工序库位。在 Odoo 中，你可以将库位设置成基于父子关系的树状结构。这样的组织方式给了你更丰富的库位层次划分和精细的仓库分级。
下面为系统中主要的库位类型：
>>物理库位。
物理库位表示实际的仓库及其层次关系。
>>业务伙伴库位。
业务伙伴库位包括客户库位和供应商库位。在与这些业务伙伴对账时，这些库位将扮演往来对账的角色。系统中“从供应商收到产品”，就是产品从供应商库位转移到自己的物理库位。由此可见，供应商库位的库存一般是负数。
>>虚拟库位，包括盘点库位、补货库位、生产库位和废品库位。
盘点库位是贵公司对库存进行盘盈和盘亏操作的对应库位。
生产库位是生产的对应方，被用在生产操作中。生产是消耗原材料，然后产出成品。“虚拟库位/生产”代表上述消耗原材料和产出成品两个操作的对应库位。
当 Odoo 安装后，仓库模块将初始化这些库位。先通过菜单“仓库→配置→设置”，在“库位和仓库”一节中，点选“管理一个仓库，可以有多个物理库位。”或“管理多个仓库，每个仓库一个有多个物理库位。”。

整个仓库管理都是建立在库位概念上的。库位是仓库分层结构中的一部分，它允许你构建虚拟库位，比如生产类型，这样就能更好的进行分析。
单击“新建”按钮可定义一个新的库位。
你需要给库位输入一个名字，选择“库位类型”，并为其选择上级库位。


#### 库位类型
库位必须是以下几种类型之一：
>>视图：虚拟库位，用于攘括子库位。
>>客户库位：销售出库的目标库位。
>>供应商库位：采购入库的源库位。
>>内部库位：通常是真实的存放货物的库位。
>>盘点：用于修正库存数量，是盘盈盘亏的库位，库存盘点时，盘盈的话，相当于从盘点库位移动到公司库位，盘亏的话相当于从公司库位移动到盘点库位。
>>生产：生产操作的对应方，用于接收原材料和发送最终成品。
>>补货：当你不知道补货来源（供应商或生产）时作为补货操作的对应方。当“计划运行”完成后，该库位的产品数量应该为零。
>>转移库位：公司间移动，在多公司的环境中使用作为中间库位。

在“产品”窗体的“库存”选项卡中，你可以定义产品的库存属性。

在业务伙伴窗体的“销售和采购”选项卡中，你可以定义其“客户库位”和“供应商库位”属性。

#### 库位地址
你可以为每个客户或供应商创建库位，并把库位地址设置成客户或供应商的地址。然后在 Odoo 中设置客户或供应商使用这个库位，而不是业务伙伴的默认库位，这样 Odoo 就会使用这个库位为业务伙伴准备收货或发货。
注：委外加工
在生产一节中，你可以将库位赋给一个工作中心，如果这个库位是供应商的，你必须给它一个地址，这样 Odoo 将为供应商准备发货单和从供应商接收生产完成的产品。为供应商创建库位，也是管理寄售库存的简单解决方案。
注：寄售库存
寄售库存是物品属于你所有（产权在你的帐户里），但实物放在你的供应商那里。或反过来说，你的客户的产品（产权不是你的），但存放在你的公司。你必须创建寄售库位作为你内部库存的一部分。
为了让你轻松地在更高层次上整合资源，库位定义是分层的。这种结构是在“上级库位”字段规定的。这使你能够管理复杂情况下产品的定位。例如，你能想象以下的情景：
Odoo 中文社区有两个仓库，一个仓库在上海，另一个在北京。对于一些订单，一部分产品你必须从上海仓库发货，另一部分部品你必须从北京仓库发货。但你可以指定一个虚拟的仓库，以便于 Odoo 进行核算，从而决定它应该从上海或从北京提供产品。
为了在 Odoo 中完成这项工作，你应该创建库位“中国”用来联系上海和北京的库位。你可以创建下面的物理库位：
Odoo 中文社区仓库
---出库库位
------中国库位
----------上海库位
----------北京库位
Odoo 将从包含订购产品的仓库中发送货物。当产品在多个仓库都有库存时，Odoo 会选择最近的仓库。为了让 Odoo 能搜索到最近的仓库，你应该标明不同仓库的地理坐标（X，Y，Z）。
这个坐标在同一个仓库的库位中可用于标识通道、货架和层。

#### 入库策略
默认情况下，没有入库策略，产品将放置在移动的目标库位上。入库策略是为初始目标库位确定一个子库位来放置产品。
为应用“入库策略”，你需要通过“仓库→配置→设置”，在“位置和仓库”一节勾选“使用规则的产品高级路线”，

例如，对于“原材料”类型的产品，如果其移动的目标库位为“库存”库位，我们可以设置其自动移动到“库存”库位的“原材料”子库位。
为此，通过“仓库→配置→位置”，点击“WH/库存”，进入编辑模式，在上架策略中，通过下拉单来“新建并编辑”一个上架策略“原材料入库到原材料库位”。
其具体内容如下图所示：
在“库存”库位上应用此策略后，只要有原材料类型的产品要入“库存”库位，其目标库位就会自动被系统更改为“库存”下面的“原材料”库位。

经过验证，可以在这一个上架策略中，把标准件，铸件，钣金件，轴承全部区分出来。


#### 理解复式记账库存管理

产品在系统中所有库位数量总和始终为 0。相当于会计帐中的所有借方与所有贷方相等。业务伙伴库位（客户库位和供应商库位）不在你公司的库位层级结构中，因此这类库存并未当作贵公司的库存的一部分。因此如果你只看贵公司内部的实际库存,那两套中文手册就不再属于贵公司了。

>注：对寄售库位，你需要为寄售客户或者供应商定义在贵公司里的实际物理库位，他们不是虚拟业务伙伴库位。
>注：账目
在仓库管理中，难免会有产品系统数据与实物数量之间产生偏差。仓库管理使用复式记帐法使发现差错的机会增加了一倍.比如说你在某库位中忘记为两个物料的入库或出库进行记录,这种差异会容易的在与该库位相关的对方库位中反映出来。

和产品采购、收货和发货不同，有些操作不是日常的仓库操作，比如库存盘点。库存盘点是比较系统内的库存数量与实际库存数量的操作。在 Odoo 中,基于其复式记帐管理方式,你可以使用库存移动来记录此种库存盘点业务。这样可以让你管理的库存有追溯性。假设上述案例中中文手册的实物库存为 26，而系统库存为 28，这 2个单位的差异你可以视为为货物丢失或者损益，你只需要一个盘点盈亏的虚拟库位，并把损益数量转移到此库位，进而把系统库存修正为 26


现在我们看看工序库位在 Odoo 中是如何组织的。生产一套手册你需要 300 张 A4 纸。这就意味着这个物理库位将减少 300 张 A4 纸，并添加入库一套手册。消耗和生产以产品移入、移出物理库位的形式在系统内体现。与此相关的库存业务如下:
至此你已经看到了从消耗原材料到产出成品的整个流程。

注：查看收益
你已经可能注意到生产的一个有用的结果：如果你对虚拟库位/生产库位做一个库存估值，你会得到一个负值（原材料消耗估值减去成品估值）。任意库位的库存估值都是成本乘以库存数量。收益为成品价值减去原材料价值。
如果你发料到“虚拟库位/生产”进行加工，此工序将为贵公司创造出价值（作为负数体现），产品收益=（原材料价值-成品价值）*数量。

####　库存管理的典型操作，包括：
>>定义新的产品（物料编码）
>>设置初始库存
>>从供应商收货
>>发货给客户
>>分析库存状态

如果你问会计师一个库存估值或产品附加值，他会给你一个数字。如果你向库房经理要一个相同的数据，你会得到一个完全不同的结果，你不知道谁是正确的。所以获得一个有用的数据是很困难的。在 Odoo 中库存管理与你的账目完美的结合在一起，保证两个系统之间完全一致。复式结构的库位，可以保证库存和账目之间的一致性。
每个库位移动也产生一个相应的会计分录在会计日志中，以确保这两个系统可以永久的同步。
>你只需要给每一个需要会计核算的库位设置会计科目。如果一个产品从一个库位转移到另一个库位，并且这两个库位的账目不相同，Odoo 将在库存日志中自动生成相应的会计记录。
如果库存移动是从一个没有账目的库位移动到一个已指定账目的库位（例如从供应商收货），Odoo 会使用产品窗口中与之对应的定义生成会计分录。你可以每个库位使用不同的账目或几个库位使用同一个账目，这取决于你实际分析的需要。


你可以使用该系统管理寄售库存：
>>在供应商库位上登记但属于自己账上的物品，
>>在你自己的公司的库位里但是不属于自己账户上的物品。

#### 深入理解仓库的内部移动
内部移动不仅是库存变化的基本操作，也可以组成库存移动流并定义分拣。库存移动流不仅对采用按库存补货（MTS）的产品有效（送货操作等待特定的入库操作完成），也可以用于其它仓库再补货的出、入库的多步操作。下面我们学习如何应用推式流和拉式流来创建这样的库存移动流。
当你为仓库人工创建了一个内部移动的时候，系统将创建一个分拣，并且通过指定相应的产品和数量来创建移动。当你确认一个销售订单时，Odoo 将首先创建不需要分拣的移动，然后，它们将被指定到已存在的分拣或创建一个分拣。
为了指定移动给一个分拣，Odoo 将检查这个移动是否指定给了一个分拣类型（例如，Odoo 中文社区：发货单）。如果找到了这个移动指定的分拣类型，它将查找一个分拣来指定给此移动。这个分拣应有和这个移动对应的状态、分拣类型、补货组（相关的补货集合，如属于同一销售订单）、源库位和目标库位。如果没有找到对应的分拣，Odoo 将创建一个新的分拣。

当一些产品必须要到包装库位打包，而另外的产品不需要的时候，这种内部移动机制提供了更多的灵活性。这样，把销售订单里涉及到打包的内部移动分到打包组，那些直接的内部移动将被分组到一个独立的分拣。对于发货单，只需要一个分拣就可以包括所有产品。
分拣的定义几乎取决于其包括的内部移动。分拣的状态取决于内部移动和分拣类型、内部移动的源库位和目标库位。通过库存移动需要的最小日期计算出计划日期。
分拣的状态主要取决于它的内部移动：
>>如果有一个移动处于草稿状态，那么这个分拣就处于草稿状态
>>如果分拣包含的所有的移动是完成或取消状态，那么这个分拣也为完成或取消状态。

其它状态还取决于移动类型。移动类型决定了客户希望一次获得所有产品（一次完成）还是期望产品以最快的速度到达它那里（允许分批发货）。这个移动类型可以手工定义，或是来自于属于一个补货组的销售订单。
对于分批发货，就存在一个特殊的状态：部分可用。一个处于确认或等待状态的移动，可能有一些库存可以被保留。在这种情况下，分拣将不是确认或等待状态，而是部分可用状态，这样就允许产品被部分发货。当一些移动被指定产品而其它移动没有库存可供保留时，一个分拣也被标记为部分可用。
一个移动可能不属于一个分拣类型。这意味着它不能被指定给一个分拣。比如库存盘点时的盘盈盘亏或生产的进出移动。
为了满足复杂的仓库管理环境，你需要通过菜单“仓库→设置→设置”勾选“库位和仓库”一节的“使用规则的产品高级路线”。


### 第12章生产



## 第五部分 推动销售业绩增长
### 第13章通过CRM跟踪线索和商机
### 第14章联系人管理
### 第15章CMS内容管理系统

## 第六部分 有效的运营管理
### 第16章辅助核算项和预算管理
### 第17章领导和激励你的员工
### 第18章项目管理
### 第19章集成文档管理

## 第七部分 高效的沟通管理
### 第20章会话交流功能
### 第21章频道
### 第22章电子邮件
### 第23章活动管理
### 第24章车辆管理

## 第八部分 系统管理和实施
### 第25章设置和管理
### 第26章Odoo的实施
### 第27章Odoo的简单二次开发
### 第28章你并不孤单


### And an ordered list:
1.  Item one
1.  Item two
1.  Item three
1.  Item four

### Here is an unordered list:
*   Item foo
*   Item bar
*   Item baz
*   Item zip

> 注释
> **强调注释**

内容

```sh
shell get 'var'
```

```yml
show_downloads: ["true" or "false" to indicate whether to provide a download URL]
google_analytics: [Your Google Analytics tracking ID]
```

```js
// Javascript code with syntax highlighting.
var fun = function lang(l) {
  dateformat.i18n = require('./lang/' + l)
  return true;
}
```

```ruby
# Ruby code with syntax highlighting
GitHubPages::Dependencies.gems.each do |gem, version|
  s.add_dependency(gem, "= #{version}")
end
```

内嵌代码`su root`

[链接](http://123.com/art/abc.htm)

### Small image

![](https://assets-cdn.github.com/images/icons/emoji/octocat.png)

### Large image

![](https://guides.github.com/activities/hello-world/branching.png)

[back](../)
